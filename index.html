<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DPlayer Example with Responsive Video</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.css">
    <!-- Tambahkan link stylesheet Bootstrap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
    <style>
      body {
        background-color: #313131;
      }
      #dplayer-wrapper {
        /* Atur tinggi kontainer agar selalu memenuhi layar */
        height: 100vh;
        /* Atur flexbox agar video selalu berada di tengah */
        display: flex;
        justify-content: center;
        align-items: center;
      }
      /* Atur ukuran video agar sesuai dengan ukuran kontainer */
      video {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center mt-3 mb-5">DPlayer Example with Responsive Video</h1>
      <div class="row">
        <div class="col-md-6 offset-md-3">
          <div class="input-group mb-3">
            <input id="video-url" type="text" class="form-control" placeholder="Masukkan URL video">
            <div class="input-group-append">
              <button id="play-button" class="btn btn-primary" type="button">Putar</button>
            </div>
          </div>
        </div>
      </div>
      <div id="dplayer-wrapper" class="container-fluid">
        <div id="dplayer"></div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
      const dp = new DPlayer({
        container: document.getElementById('dplayer'),
        screenshot: true,
        video: {
          url: '',
          type: 'auto'
        },
        hls: true,
        xhrSetup: {
          headers: {
            'Referer': 'https://dplayer.js.org/'
          }
        },
        pluginOptions: {
          hls: {
            enable: true
          }
        }
      });
      
      const playButton = document.getElementById('play-button');
      const videoUrlInput = document.getElementById('video-url');
      
      playButton.addEventListener('click', () => {
        dp.video.pause();
        dp.video.currentTime = 0;
        dp.video.src = videoUrlInput.value;
        dp.play();
        document.getElementById('dplayer-wrapper').classList.remove('container-fluid');
        document.getElementById('dplayer-wrapper').classList.add('embed-responsive', 'embed-responsive-16by9');
        document.getElementById('dplayer').classList.add('embed-responsive-item');
        document.getElementById('dplayer').addEventListener('click', () => {
          if (!dp.video.paused) {
            document.getElementById('video-url').style.display = 'none';
          }
        });
      });
      dp.on('fullscreen', () => {
        if (document.webkitFullscreenElement) {
          document.webkitFullscreenElement.setAttribute('playsinline', '');
          document.webkitFullscreenElement.webkitEnterFullScreen();
        }
      });
      
    </script>
  </body>
</html>
